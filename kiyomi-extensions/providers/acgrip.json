{
  "id": "acgrip",
  "displayName": "ACG.RIP (Chinese Anime RSS)",
  "siteUrl": "https://acg.rip",
  "iconUrl": "https://acg.rip/favicon.ico",
  "type": "RSS_XML",
  "isAdult": false,
      "isSecure": true,
      "cautionReason": "",
      "isPrivate": false,
      "isApiKeyRequired": false,
      "version": 1.0

  // Maps display name to the required numerical path segment (1, 2, 3, etc.)
  "categoryMap": {
    "All": "",                       // Maps to blank path: https://acg.rip/.xml?term=
    "Animation": "1",
    "Japanese drama": "2",
    "Variety Show": "3",
    "Music": "4",
    "Collection": "5",
    "other": "9"
  },

  // CRITICAL FIX: Use the category substitution in the path, and map "All" to ""
  // The full URL construction logic must ensure a double slash doesn't result.
  "searchUrlTemplate": "https://acg.rip/{category}.xml?term={query}",

  "searchSteps": [
    // --- Step 1: Fetch Search Results Page (HTTP_REQUEST) ---
    {
      "stepType": "HTTP_REQUEST",
      "method": "GET",
      "urlKey": "searchUrlTemplate"
    },

    // --- Step 2: MAP_RESULTS_GENERIC (Scrape RSS Items) ---
    {
      "stepType": "MAP_RESULTS_GENERIC",
      "rootSelector": "item", 
      "isRootArray": false, 

      "fields": {
        "title": { "accessor": "title::text", "accessorType": "XML_TAG" },
        "infoUrl": { "accessor": "guid::text", "accessorType": "XML_TAG" },
        "torrentDownloadUrl": { "accessor": "enclosure::attr(url)", "accessorType": "XML_TAG" }
      },

      "postProcessors": [
        {
          "processorType": "FUNCTION_CALL",
          "functionName": "BUILD_MAGNET_FROM_URL",
          "sourceKey": "torrentDownloadUrl",
          "targetKey": "magnetUrl",
          "extraSourceKey": "title"
        }
      ],

      "finalMapping": {
        "title": "{title}",
        "torrentDownloadUrl": "{torrentDownloadUrl}",
        "magnetUrl": "{magnetUrl}",
        "infoUrl": "{infoUrl}"
      }
    }
  ]
}
