{
  "id": "eztv",
  "displayName": "EZTV",
  "siteUrl": "https://eztvx.to",
  "iconUrl": "https://eztvx.to/favicon.ico",
  "type": "HTML_SCRAPE",
  "isAdult": false,
  "isSecure": true,
  "cautionReason": "",
  "isPrivate": false,
  "isApiKeyRequired": false,
  "version": 1.0,

  "categoryMap": {
    "All": ""
  },

  "searchUrlTemplate": "https://eztvx.to/search/{query}",

  "searchSteps": [
    {
      "stepType": "HTTP_REQUEST",
      "method": "GET",
      "urlKey": "searchUrlTemplate",
      "headers": {
        "Cookie": "layout=def_wlinks"
      }
    },
    {
      "stepType": "MAP_RESULTS_GENERIC",
      "rootSelector": "table.forum_header_border:last-of-type > tbody > tr:nth-child(n+3)",
      "isRootArray": false,

      "fields": {
        // Title (td:nth-child(2) > a.epinfo)
        "title": { "accessor": "td:nth-child(2) a.epinfo::text", "accessorType": "CSS_SELECTOR" },
        "magnetUrl": { "accessor": "td:nth-child(3) a.magnet::attr(href)", "accessorType": "CSS_SELECTOR" },
        "detailsPath": { "accessor": "td:nth-child(2) a.epinfo::attr(href)", "accessorType": "CSS_SELECTOR" },
        
        // Size (td:nth-child(4)) - e.g., "715 MB"
        "size_raw": { 
          "accessor": "td:nth-child(4)::text", 
          "accessorType": "CSS_SELECTOR"
        },
        // Released Date (td:nth-child(5)) - e.g., "1 week"
        "publishDate": { 
          "accessor": "td:nth-child(5)::text", 
          "accessorType": "CSS_SELECTOR",
          "conversionType": "DATE_STRING"
        },
        // SEEDS FIX: Target the TD and rely on the INT conversion to clean the number.
        "seeds": { 
          "accessor": "td:nth-child(6)::text", 
          "accessorType": "CSS_SELECTOR",
          "conversionType": "INT" 
        }
      },

      "postProcessors": [
        {
          "processorType": "FUNCTION_CALL",
          "functionName": "HUMAN_SIZE_TO_BYTES",
          "sourceKey": "size_raw",
          "targetKey": "size"
        },
        {
          "processorType": "FUNCTION_CALL",
          "functionName": "CONSTRUCT_URL",
          "sourceKey": "detailsPath",
          "targetKey": "infoUrl",
          "extraSourceKey": "siteUrl"
        }
      ],

      "finalMapping": {
        "title": "{title}",
        "magnetUrl": "{magnetUrl}",
        "size": "{size}",
        "seeds": "{seeds}",
        "peers": "0", // Hardcoded zero peer count
        "infoUrl": "{infoUrl}",
        "publishDate": "{publishDate}"
      }
    }
  ]
}
