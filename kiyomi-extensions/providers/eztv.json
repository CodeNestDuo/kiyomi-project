{
  "id": "eztv",
  "displayName": "EZTV",
  "siteUrl": "https://eztvx.to",
  "iconUrl": "https://eztvx.to/favicon.ico",
  "type": "HTML_SCRAPE",
  "isAdult": false,
  "isSecure": true,
  "cautionReason": "",
  "isPrivate": false,
  "isApiKeyRequired": false,
  "version": 1.0,

  "categoryMap": {
    "All": "",
    "Series": "" // EZTV is series-only, so the category map is minimal
  },

  "searchUrlTemplate": "https://eztvx.to/search/{query}",

  "searchSteps": [
    // --- Step 1: Fetch Search Results Page (CRITICAL COOKIE HEADER) ---
    {
      "stepType": "HTTP_REQUEST",
      "method": "GET",
      "urlKey": "searchUrlTemplate",
      "headers": {
        "Cookie": "layout=def_wlinks" // Required to make magnet links appear
      }
    },

    // --- Step 2: MAP_RESULTS_GENERIC (Scrape Initial Data) ---
    {
      "stepType": "MAP_RESULTS_GENERIC",
      // Targets the last table body and skips the first two header rows (tr:nth-child(n+3))
      "rootSelector": "table.forum_header_border:last-of-type > tbody > tr:nth-child(n+3)", 
      "isRootArray": false,

      "fields": {
        // Title (td:nth-child(2) > a.epinfo)
        "title": { 
          "accessor": "td:nth-child(2) a.epinfo::text", 
          "accessorType": "CSS_SELECTOR" 
        },
        // Magnet Link (a.magnet)
        "magnetUrl": {
          "accessor": "td:nth-child(3) a.magnet::attr(href)", // Column 3 (Dload) contains the magnet link
          "accessorType": "CSS_SELECTOR"
        },
        // Info URL (a.epinfo href attribute)
        "detailsPath": { 
          "accessor": "td:nth-child(2) a.epinfo::attr(href)", 
          "accessorType": "CSS_SELECTOR" 
        },
        // Size (td:nth-child(4)) - e.g., "715 MB"
        "size_raw": { 
          "accessor": "td:nth-child(4)::text", 
          "accessorType": "CSS_SELECTOR"
        },
        // Released Date (td:nth-child(5)) - e.g., "1 week"
        "publishDate": { 
          "accessor": "td:nth-child(5)::text", 
          "accessorType": "CSS_SELECTOR",
          "conversionType": "DATE_STRING" // Relative date format
        },
        // Seeds (td:nth-child(6) > font) - Note the font tag is inside the TD
        "seeds": { 
          "accessor": "td:nth-child(6) font::text", 
          "accessorType": "CSS_SELECTOR",
          "conversionType": "INT" // Engine will clean commas and convert
        }
        // Peers field is intentionally omitted (hardcoded to 0 in final mapping)
      },

      "postProcessors": [
        // 1. Convert Human Readable Size (e.g., 715 MB) to Bytes (Long)
        {
          "processorType": "FUNCTION_CALL",
          "functionName": "HUMAN_SIZE_TO_BYTES",
          "sourceKey": "size_raw",
          "targetKey": "size" // Overwrite the 'size' field with the converted Long
        },
        // 2. Construct the full absolute URL for the detail page
        {
          "processorType": "FUNCTION_CALL",
          "functionName": "CONSTRUCT_URL",
          "sourceKey": "detailsPath",
          "targetKey": "infoUrl", 
          "extraSourceKey": "siteUrl"
        }
      ],

      "finalMapping": {
        "title": "{title}",
        "magnetUrl": "{magnetUrl}",
        "size": "{size}",
        "seeds": "{seeds}",
        "peers": "0", // Hardcoded zero peer count
        "infoUrl": "{infoUrl}",
        "publishDate": "{publishDate}"
      }
    }
  ]
}
